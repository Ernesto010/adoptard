<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>AdoptaRD ‚Äî Solicitud de adopci√≥n</title>
<style>
  :root{--primary:#2F7D5C;--bg:#F6F7F9;--text:#111;--muted:#444}
  *{box-sizing:border-box} 
  body{margin:0;font-family:Inter,system-ui,-apple-system,Arial,sans-serif;background:var(--bg);color:var(--text)}
  a{text-decoration:none;color:inherit}
  .wrap{max-width:1000px;margin:auto;padding:24px}
  .nav{display:flex;justify-content:space-between;align-items:center;background:#fff;border-bottom:1px solid #e7e7e7;padding:14px 24px;margin-bottom:24px}
  .brand{color:var(--primary);font-weight:800;font-size:20px}
  h1{margin:0 0 8px 0;font-size:28px}
  .subtitle{color:var(--muted);font-size:14px;margin-bottom:20px}
  .progress-container{margin-bottom:24px}
  .steps{display:flex;justify-content:space-between;margin-bottom:10px;gap:6px}
  .step{flex:1;text-align:center;font-size:12px;color:var(--muted);font-weight:600;white-space:nowrap}
  .step.active{color:var(--primary)}
  .step.completed{color:var(--primary)}
  .bar{height:12px;background:#dfe6eb;border-radius:999px;overflow:hidden}
  .fill{height:100%;width:0;background:var(--primary);transition:width 240ms ease;border-radius:999px}
  .panel{background:#fff;border:1px solid #eee;border-radius:16px;padding:24px}
  .form-grid{display:grid;grid-template-columns:1fr 1fr;gap:16px}
  .form-grid.full{grid-template-columns:1fr}
  label{display:block;margin-bottom:6px;font-weight:600;font-size:14px}
  input,select,textarea{width:100%;padding:12px 14px;border:1px solid #ddd;border-radius:10px;font-size:14px}
  textarea{min-height:100px;resize:vertical}
  input:focus,select:focus,textarea:focus{outline:none;border-color:var(--primary);box-shadow:0 0 0 3px rgba(47,125,92,0.1)}
  .helper{font-size:12px;color:var(--muted);margin-top:4px}
  .actions{display:flex;gap:12px;margin-top:24px}
  .btn{background:var(--primary);color:#fff;border:0;padding:12px 20px;border-radius:10px;cursor:pointer;font-weight:600}
  .btn.secondary{background:#eaeaea;color:#111}
  .btn[disabled]{opacity:.6;cursor:not-allowed}
  .hidden{display:none}
  .alert{background:#fff3cd;border:1px solid #ffc107;color:#856404;padding:12px 14px;border-radius:10px;margin-bottom:16px;font-size:14px}
  .ok{background:#d4edda;border:1px solid #c3e6cb;color:#155724}
  .review{line-height:1.7}
  .review h3{margin:16px 0 8px 0;font-size:16px}
  .review .box{background:#f8f9fa;border:1px solid #e7e7e7;border-radius:10px;padding:14px}
  @media (max-width:700px){.form-grid{grid-template-columns:1fr}}
</style>
</head>
<body>
<header class="nav">
  <a class="brand" href="index.html">üêæ AdoptaRD</a>
  <nav style="color:#666">Solicitud de adopci√≥n</nav>
</header>

<main class="wrap">
  <h1>Solicitud de adopci√≥n para <strong>Luna</strong></h1>
  <p class="subtitle">Completa los pasos. No se guarda en servidor: es una simulaci√≥n de env√≠o para fines acad√©micos.</p>

  <!-- Progreso -->
  <div class="progress-container">
    <div class="steps" id="steps">
      <div class="step" data-step="1">1. Datos</div>
      <div class="step" data-step="2">2. Motivo</div>
      <div class="step" data-step="3">3. Hogar</div>
      <div class="step" data-step="4">4. Referencias</div>
      <div class="step" data-step="5">5. Revisi√≥n</div>
    </div>
    <div class="bar"><div class="fill" id="progressFill"></div></div>
  </div>

  <!-- Paso 1: Datos -->
  <section class="panel step-panel" id="step-1">
    <div class="alert">üí° Escribe tus datos de contacto para que el refugio pueda ubicarte.</div>
    <div class="form-grid">
      <div>
        <label for="nombre">Nombre completo *</label>
        <input id="nombre" type="text" required placeholder="Juan P√©rez">
      </div>
      <div>
        <label for="cedula">C√©dula *</label>
        <input id="cedula" type="text" required placeholder="001-1234567-8">
      </div>
      <div>
        <label for="email">Correo *</label>
        <input id="email" type="email" required placeholder="tu@email.com">
      </div>
      <div>
        <label for="telefono">Tel√©fono *</label>
        <input id="telefono" type="tel" required placeholder="809-000-0000">
      </div>
      <div>
        <label for="provincia">Provincia *</label>
        <select id="provincia" required>
          <option value="">Selecciona‚Ä¶</option>
          <option>Santo Domingo</option><option>Santiago</option><option>La Vega</option>
          <option>San Crist√≥bal</option><option>Puerto Plata</option>
        </select>
      </div>
      <div>
        <label for="ocupacion">Ocupaci√≥n</label>
        <input id="ocupacion" type="text" placeholder="Ej. Estudiante, Analista de TI‚Ä¶">
      </div>
    </div>
    <div class="actions">
      <a class="btn secondary" href="ficha.html">‚Üê Volver</a>
      <button class="btn" data-next>Continuar</button>
    </div>
  </section>

  <!-- Paso 2: Motivo -->
  <section class="panel step-panel hidden" id="step-2">
    <div class="form-grid full">
      <div>
        <label for="motivo">¬øPor qu√© deseas adoptar a Luna? *</label>
        <textarea id="motivo" maxlength="500" placeholder="Cu√©ntanos tu motivaci√≥n (m√≠n. 50 caracteres)‚Ä¶"></textarea>
        <div class="helper"><span id="motivo-count">0</span>/500</div>
      </div>
      <div>
        <label for="experiencia">Experiencia previa con mascotas *</label>
        <textarea id="experiencia" placeholder="Tipo de mascota, tiempo de cuidado, responsabilidades‚Ä¶"></textarea>
      </div>
    </div>
    <div class="actions">
      <button class="btn secondary" data-prev>‚Üê Atr√°s</button>
      <button class="btn" data-next>Siguiente ‚Üí</button>
    </div>
  </section>

  <!-- Paso 3: Hogar -->
  <section class="panel step-panel hidden" id="step-3">
    <div class="form-grid">
      <div>
        <label for="vivienda">Tipo de vivienda *</label>
        <select id="vivienda">
          <option value="">Selecciona‚Ä¶</option>
          <option>Casa</option><option>Apartamento</option><option>Otro</option>
        </select>
      </div>
      <div>
        <label for="espacio">¬øTiene patio/terraza?</label>
        <select id="espacio">
          <option>Patio amplio</option><option>Patio peque√±o</option><option>Terraza/Balc√≥n</option><option>No</option>
        </select>
      </div>
      <div>
        <label for="ninos">¬øHay ni√±os en casa?</label>
        <select id="ninos"><option>No</option><option>S√≠, menores de 8</option><option>S√≠, 8 o m√°s</option></select>
      </div>
      <div>
        <label for="otrasMascotas">Otras mascotas</label>
        <input id="otrasMascotas" type="text" placeholder="Perro mediano, 4 a√±os‚Ä¶">
      </div>
      <div class="form-grid full">
        <div>
          <label for="rutina">Tiempo disponible y rutina *</label>
          <textarea id="rutina" placeholder="Paseos, juegos, entrenamiento, fines de semana‚Ä¶"></textarea>
        </div>
      </div>
    </div>
    <div class="actions">
      <button class="btn secondary" data-prev>‚Üê Atr√°s</button>
      <button class="btn" data-next>Siguiente ‚Üí</button>
    </div>
  </section>

  <!-- Paso 4: Referencias -->
  <section class="panel step-panel hidden" id="step-4">
    <div class="form-grid">
      <div>
        <label for="ref1">Referencia personal #1 *</label>
        <input id="ref1" type="text" placeholder="Nombre y tel√©fono">
      </div>
      <div>
        <label for="ref2">Referencia personal #2 *</label>
        <input id="ref2" type="text" placeholder="Nombre y tel√©fono">
      </div>
      <div class="form-grid full">
        <div>
          <label class="checkbox-label" style="display:flex;gap:10px;align-items:start">
            <input type="checkbox" id="terminos" style="width:auto;margin-top:4px">
            <span>Acepto las pol√≠ticas de adopci√≥n responsable y autorizo el tratamiento de mis datos (Ley 172-13).</span>
          </label>
        </div>
      </div>
    </div>
    <div class="actions">
      <button class="btn secondary" data-prev>‚Üê Atr√°s</button>
      <button class="btn" data-next>Revisar ‚Üí</button>
    </div>
  </section>

  <!-- Paso 5: Revisi√≥n -->
  <section class="panel step-panel hidden" id="step-5">
    <div class="ok alert">‚úì Revisa que todo est√© correcto. Si algo falta, vuelve a los pasos anteriores.</div>
    <div class="review" id="reviewBox">
      <!-- Se llena por JS -->
    </div>
    <div class="actions">
      <button class="btn secondary" data-prev>‚Üê Atr√°s</button>
      <button class="btn" id="btnEnviar">Enviar solicitud</button>
    </div>
  </section>
</main>

<script>
  // Estado y utilidades
  const state = {
    step: 1,
    data: {}
  };

  const totalSteps = 5;
  const panels = [...document.querySelectorAll('.step-panel')];
  const progress = document.getElementById('progressFill');
  const stepsLabels = [...document.querySelectorAll('.step')];

  function setStep(n) {
    state.step = Math.min(Math.max(1, n), totalSteps);
    panels.forEach((p, i) => p.classList.toggle('hidden', i !== state.step - 1));
    // progreso
    const pct = ((state.step - 1) / (totalSteps - 1)) * 100;
    progress.style.width = pct + '%';
    // etiquetas
    stepsLabels.forEach(el => {
      const s = Number(el.dataset.step);
      el.classList.toggle('active', s === state.step);
      el.classList.toggle('completed', s < state.step);
    });
    // Si es review, render
    if (state.step === 5) renderReview();
  }

  // Contadores
  const motivo = document.getElementById('motivo');
  motivo.addEventListener('input', () => {
    document.getElementById('motivo-count').textContent = motivo.value.length;
  });

  // Botones Next/Prev
  document.querySelectorAll('[data-next]').forEach(btn => btn.addEventListener('click', () => {
    if (validateStep(state.step)) {
      saveStep(state.step);
      setStep(state.step + 1);
    }
  }));

  document.querySelectorAll('[data-prev]').forEach(btn => btn.addEventListener('click', () => {
    setStep(state.step - 1);
  }));

  // Validaciones b√°sicas por paso
  function validateStep(step) {
    switch (step) {
      case 1: {
        const req = ['nombre','cedula','email','telefono','provincia'];
        for (const id of req) {
          const el = document.getElementById(id);
          if (!el.value.trim()) { alert('Completa todos los campos obligatorios del paso 1.'); el.focus(); return false; }
        }
        return true;
      }
      case 2: {
        const m = motivo.value.trim();
        const e = document.getElementById('experiencia').value.trim();
        if (m.length < 50) { alert('Describe tu motivaci√≥n con al menos 50 caracteres.'); motivo.focus(); return false; }
        if (!e) { alert('Indica tu experiencia previa con mascotas.'); return false; }
        return true;
      }
      case 3: {
        const v = document.getElementById('vivienda').value;
        const r = document.getElementById('rutina').value.trim();
        if (!v) { alert('Selecciona el tipo de vivienda.'); return false; }
        if (!r) { alert('Describe tu tiempo disponible y rutina.'); return false; }
        return true;
      }
      case 4: {
        const r1 = document.getElementById('ref1').value.trim();
        const r2 = document.getElementById('ref2').value.trim();
        const t = document.getElementById('terminos').checked;
        if (!r1 || !r2) { alert('Agrega dos referencias personales.'); return false; }
        if (!t) { alert('Debes aceptar las pol√≠ticas para continuar.'); return false; }
        return true;
      }
      default: return true;
    }
  }

  // Guardar datos por paso
  function saveStep(step) {
    if (step === 1) {
      state.data.nombre = document.getElementById('nombre').value.trim();
      state.data.cedula = document.getElementById('cedula').value.trim();
      state.data.email = document.getElementById('email').value.trim();
      state.data.telefono = document.getElementById('telefono').value.trim();
      state.data.provincia = document.getElementById('provincia').value;
      state.data.ocupacion = document.getElementById('ocupacion').value.trim();
    }
    if (step === 2) {
      state.data.motivo = document.getElementById('motivo').value.trim();
      state.data.experiencia = document.getElementById('experiencia').value.trim();
    }
    if (step === 3) {
      state.data.vivienda = document.getElementById('vivienda').value;
      state.data.espacio = document.getElementById('espacio').value;
      state.data.ninos = document.getElementById('ninos').value;
      state.data.otrasMascotas = document.getElementById('otrasMascotas').value.trim();
      state.data.rutina = document.getElementById('rutina').value.trim();
    }
    if (step === 4) {
      state.data.ref1 = document.getElementById('ref1').value.trim();
      state.data.ref2 = document.getElementById('ref2').value.trim();
      state.data.terminos = document.getElementById('terminos').checked;
    }
  }

  // Render de revisi√≥n
  function renderReview() {
    const d = state.data;
    const box = document.getElementById('reviewBox');
    box.innerHTML = `
      <h3>Datos de contacto</h3>
      <div class="box">
        <strong>${d.nombre}</strong> ¬∑ ${d.cedula}<br>
        ${d.email} ¬∑ ${d.telefono}<br>
        ${d.provincia}${d.ocupacion ? ' ¬∑ ' + d.ocupacion : ''}
      </div>
      <h3>Motivo y experiencia</h3>
      <div class="box">
        <em>Motivo:</em> ${escapeHTML(d.motivo)}<br><br>
        <em>Experiencia:</em> ${escapeHTML(d.experiencia)}
      </div>
      <h3>Hogar</h3>
      <div class="box">
        Vivienda: ${d.vivienda} ¬∑ Espacio: ${d.espacio} ¬∑ Ni√±os: ${d.ninos}<br>
        Otras mascotas: ${d.otrasMascotas || 'N/A'}<br><br>
        <em>Rutina:</em> ${escapeHTML(d.rutina)}
      </div>
      <h3>Referencias</h3>
      <div class="box">
        #1: ${d.ref1}<br>
        #2: ${d.ref2}
      </div>
    `;
  }

  function escapeHTML(s){return s.replace(/[&<>"']/g,m=>({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;' }[m]));}

  // Env√≠o simulado
  document.getElementById('btnEnviar').addEventListener('click', () => {
    saveStep(4); // aseg√∫rate de tener todo
    const btn = document.getElementById('btnEnviar');
    btn.disabled = true;
    btn.textContent = 'Enviando‚Ä¶';
    setTimeout(() => {
      alert(`‚úì Solicitud enviada\n\nGracias, ${state.data.nombre}. El refugio revisar√° tu solicitud y te contactar√° por correo.`);
      // Redirige (demo). Cambia a la ruta real si quieres.
      window.location.href = 'catalogo.html';
    }, 1200);
  });

  // Inicial
  setStep(1);
</script>
</body>
</html>
